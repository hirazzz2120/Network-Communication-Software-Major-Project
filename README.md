# SIP é€šä¿¡ç³»ç»Ÿ

> åŸºäº JAIN SIP + Spring Boot + JavaFX çš„å³æ—¶é€šä¿¡ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

å®Œæ•´çš„ SIP é€šä¿¡ç³»ç»Ÿï¼Œæ”¯æŒå³æ—¶æ¶ˆæ¯ã€è¯­éŸ³é€šè¯å’Œæ–‡ä»¶ä¼ è¾“ã€‚

**ç³»ç»Ÿæ¶æ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Java å®¢æˆ·ç«¯    â”‚ â†â”€SIPâ”€â†’ â”‚   MSS SIP æœåŠ¡å™¨  â”‚
â”‚  (sip-client)   â”‚         â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTP (æ–‡ä»¶ä¼ è¾“)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸šåŠ¡æœåŠ¡å™¨       â”‚
â”‚  (admin-server) â”‚
â”‚  - æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½  â”‚
â”‚  - ç”¨æˆ·ç®¡ç†       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ ˆ

| æ¨¡å— | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| æ„å»ºå·¥å…· | Maven | 3.x |
| JDK | OpenJDK | 17 |
| SIP åè®® | JAIN SIP RI | 1.3.0-91 |
| æœåŠ¡ç«¯ | Spring Boot | 3.2.5 |
| å®¢æˆ·ç«¯ UI | JavaFX | 21.0.1 |
| æœ¬åœ°å­˜å‚¨ | SQLite | 3.45.0.0 |
| æœåŠ¡ç«¯æ•°æ®åº“ | H2 (å†…å­˜) | - |

## æ ¸å¿ƒåŠŸèƒ½

### âœ… å·²å®Œæˆ
- **SIP åè®®**ï¼šæ³¨å†Œã€æ¶ˆæ¯ã€å‘¼å«
- **å³æ—¶æ¶ˆæ¯**ï¼šç±»å¾®ä¿¡æ°”æ³¡ç•Œé¢
- **è¯­éŸ³é€šè¯**ï¼šSIP ä¿¡ä»¤
- **æ–‡ä»¶ä¼ è¾“**ï¼šå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€é€šç”¨æ–‡ä»¶ï¼ˆHTTP ä¸Šä¼  + SIP é“¾æ¥ï¼‰
- **è”ç³»äººç®¡ç†**ï¼šå¢åˆ æ”¹æŸ¥ã€æœç´¢
- **æœ¬åœ°å­˜å‚¨**ï¼šSQLite æ¶ˆæ¯å†å²
- **è®¾ç½®ç•Œé¢**ï¼šé€šçŸ¥ã€éŸ³é‡ã€è‡ªåŠ¨ä¿å­˜

### ğŸ”„ å¼€å‘ä¸­
- RTP éŸ³é¢‘ä¼ è¾“
- ç¾¤èŠåŠŸèƒ½

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- JDK 17+
- Maven 3.x

### ğŸš€ å¯åŠ¨æ­¥éª¤

> âš ï¸ **æ–‡ä»¶ä¼ è¾“åŠŸèƒ½éœ€è¦å…ˆå¯åŠ¨ admin-server**

**1. å¯åŠ¨ä¸šåŠ¡æœåŠ¡å™¨**
```powershell
cd admin-server
mvn spring-boot:run
```
ç­‰å¾…çœ‹åˆ° `Started AdminServerApplication`ï¼ŒæœåŠ¡è¿è¡Œåœ¨ `http://localhost:8081`

**2. å¯åŠ¨ GUI å®¢æˆ·ç«¯ï¼ˆæ–°å¼€ç»ˆç«¯çª—å£ï¼‰**
```powershell
.\start-gui.ps1
```

**3. ç™»å½•**
- è¾“å…¥ç”¨æˆ· IDï¼ˆå¦‚ 101ï¼‰
- SIP æœåŠ¡å™¨åœ°å€ï¼ˆé»˜è®¤ 10.29.133.174:5060ï¼‰
- ç‚¹å‡»ç™»å½•

---

## æ–‡ä»¶ä¼ è¾“

### æ”¯æŒç±»å‹

| ç±»å‹ | å¤§å°é™åˆ¶ | æ ¼å¼ |
|------|---------|------|
| å›¾ç‰‡ | 10MB | jpg, png, gif, bmp, webp |
| éŸ³é¢‘ | 5MB | wav, mp3, m4a, aac |
| è§†é¢‘ | 50MB | mp4, avi, mov, mkv |
| æ–‡ä»¶ | 20MB | ä»»æ„ |

### ä½¿ç”¨æ–¹æ³•
1. é€‰æ‹©è”ç³»äºº
2. ç‚¹å‡» ğŸ“ æˆ–ç›¸åº”æŒ‰é’®é€‰æ‹©æ–‡ä»¶
3. æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ å¹¶å‘é€é“¾æ¥ç»™å¯¹æ–¹

### å±€åŸŸç½‘é…ç½®

å¦‚éœ€å±€åŸŸç½‘å†…ä¸ä»–äººäº’ä¼ æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹ä¸¤å¤„çš„ IP åœ°å€ï¼š

1. `sip-client/.../file/FileTransferService.java`
   ```java
   private String serverUrl = "http://ä½ çš„IP:8081";
   ```

2. `admin-server/.../controller/FileController.java`
   ```java
   String downloadUrl = String.format("http://ä½ çš„IP:%d/api/files/download/%s", ...);
   ```

---

## é¡¹ç›®ç»“æ„

```
Project/
â”œâ”€â”€ pom.xml                    # çˆ¶ POM
â”œâ”€â”€ start-gui.ps1              # GUI å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-sip-user101.ps1      # å‘½ä»¤è¡Œå¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-sip-user102.ps1
â”‚
â”œâ”€â”€ sip-client/                # å®¢æˆ·ç«¯æ¨¡å—
â”‚   â””â”€â”€ src/main/java/.../
â”‚       â”œâ”€â”€ sip/               # SIP åè®®å±‚
â”‚       â”œâ”€â”€ call/              # å‘¼å«ç®¡ç†
â”‚       â”œâ”€â”€ chat/              # æ¶ˆæ¯å¤„ç†
â”‚       â”œâ”€â”€ file/              # æ–‡ä»¶ä¼ è¾“æœåŠ¡
â”‚       â””â”€â”€ gui/               # JavaFX ç•Œé¢
â”‚           â”œâ”€â”€ controller/    # æ§åˆ¶å™¨
â”‚           â”œâ”€â”€ model/         # æ•°æ®æ¨¡å‹
â”‚           â””â”€â”€ storage/       # æœ¬åœ°å­˜å‚¨
â”‚
â””â”€â”€ admin-server/              # æœåŠ¡å™¨æ¨¡å—
    â””â”€â”€ src/main/java/.../
        â”œâ”€â”€ controller/        # REST API
        â”‚   â”œâ”€â”€ FileController # æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½
        â”‚   â”œâ”€â”€ AuthController # è®¤è¯
        â”‚   â””â”€â”€ ...
        â”œâ”€â”€ entity/            # æ•°æ®æ¨¡å‹
        â””â”€â”€ repository/        # æ•°æ®è®¿é—®
```

---

## å¸¸è§é—®é¢˜

**Q: æ–‡ä»¶å‘é€å¤±è´¥ï¼Œæ˜¾ç¤º"ç¼–ç ä¸­"åæŠ¥é”™ï¼Ÿ**  
A: ç¡®ä¿ admin-server å·²å¯åŠ¨ä¸”å¯è®¿é—®ã€‚

**Q: å±€åŸŸç½‘å…¶ä»–äººæ— æ³•æ¥æ”¶æ–‡ä»¶ï¼Ÿ**  
A: æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ 8081 ç«¯å£ï¼Œç¡®è®¤ IP åœ°å€é…ç½®æ­£ç¡®ã€‚

**Q: èŠå¤©è®°å½•ä¿å­˜åœ¨å“ªï¼Ÿ**  
A: é¡¹ç›®æ ¹ç›®å½•çš„ `sip_client.db`ï¼ˆSQLiteï¼‰ã€‚

**Q: å¦‚ä½•æ›´æ¢ SIP æœåŠ¡å™¨ï¼Ÿ**  
A: ç™»å½•ç•Œé¢ç›´æ¥ä¿®æ”¹ SIP URIã€‚

---

## è®¸å¯è¯

æœ¬é¡¹ç›®ç”¨äºè¯¾ç¨‹å­¦ä¹ å’ŒæŠ€æœ¯ç ”ç©¶ã€‚
